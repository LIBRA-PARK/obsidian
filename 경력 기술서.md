
# 인터페이스 프레임워크 'AnyLink 8' 제품 설계 및 개발
(주)TmaxSoft, Interface Core 파트 - 연구원
2023.12 ~ 진행 중
## 비정형 데이터 저장 방식 및 서비스를 관계형 데이터베이스로 설계 및 서비스 구현

### 설계 목적

AnyLink 7의 경우에 String 과 BLOB 자료형으로 구성된 각 'SYS_ID' 와 'CONTENTS' 두 개의 컬럼으로 비정형 데이터 저장 방식을 채용 후 Key-Value 구성하여 프레임워크에 필요한 자원을 XML또는 JSON, Byte 형식으로 변환해 저장 및 운영되도록 구성되어있었다. 

![[Pasted image 20240906180848.png]]

본 방식을 채용한 프레임워크는 단순히 직렬화 된 데이터를 'CONTENTS' 컬럼에 저장만 한다면 손쉽게 고객의 요구되는 설정 값과 요구 사항에 대해서 대응할 수 있기 때문에, 역직렬화 될 자바 클래스 객체만 잘 관리한다면 고객의 인터페이스의 요구 사항에 대해서 추가적인 데이터베이스 작업이나 Schema 변경에 영향을 받지 않기에 주요 비즈니스 로직에 있어서 확실한 의존성 독립할 수 있어 좋은 유연성과 확장성을 보장하며 운영되는 효과를 볼 수 있었다.

이 구조로 인터페이스 프레임워크는 손 쉽게 고객 별 요구 사항과 추가적인 인터페이스 기능들을 점차 유연하게 확대되어 오면서 운영되어왔다. 그 결과 현재는 Endpoint 또는 Interface Transaction에 대해서 설정할 수 있는  기능 옵션을 100 ~ 180 개를 지원해 타사 제품과 달리 넓은 편의 기능을 지원하는 프레임워크가 될 수 있었다. 하지만, 이 결과는 확장 가능성에 대해서 높은 효과 확장성을 보장했다고 말할 수 있지만 이면으로는 데이터가 무분별하게 확대되고 비즈니스 로직의 객체가 비대 해져 코드 레벨에 가독성과 유지 보수성을 저하시켰다. 이 결과로 코드 레벨에서 리소스 간의 관계 파악이 어려워 인터페이스 배포 전 유효성 검사를 완벽하게 수행하지 못했다.

장기간 제품이 운영되면서 이 문제점들은 점점 대두되며 이슈 발생률과 대응 시간에 악영향을 미치게됬다. 실제로 이슈 대응과 신규 기능 개발 업무를 약 2년 간 맡아오며 이슈들은 공통적으로 정상적인 인터페이스 배포 및 실행이 어려우니 분석을 요청하거나 실행 할 수 있게 새로운 기능을 만들어 달라는 것이다. 왜냐하면, 장기간 운영과 신규 기능 추가로 관리해야 하는 리소스의 크기와 수는 점진적으로 커졌음에도 불구하고 리소스 유효성을 보장할 수 없어 온전히 사용자의 설정 값에 인터페이스의 배포 빛 실행 결과가 도출되었다. 

이러한 기현상이 반복되면서 개발 파트는 코드 분석보단 데이터베이스 저장된 필드 값을 비즈니스 로직에 디버깅 하면서 가이드 문서를 작성하는데 업무 시간을 소비하게 됬다. 게다가, 모든 데이터가 Key-Value 방식으로 저장된 방식은 신규 기능을 만드는데도 악영향으로 작용되었다. 필터링, 검색 기능 같이 편의성 개선을 위한 서비스를 제공하기 위해선 반드시 전체 데이터를 직렬화 한 후 비즈니스 로직에 필요한 필드만 가져와서 구현해야만 했으며, 이 직렬화 과정은 관리되는 자원이 많으면 많아질수록 서비스의 성능 저하 및 본 구조에서 구현을 위한 역정규화를 유발하는 결과를 초래했다.

### 문제 정의
+ 

### 해결 과정
이슈 대응 시간을 감소와 신속한 원인 파악을 위해서 비즈니스 로직에 리소스들의 관계와 Transaction 동작에 대한 흐름을 파악하기 위해서 비정형 데이터 저장 방식을 지양하고 Java Application의 객체 지향적 구조를 엔티티간의 관계를 명확하게 정의하기 위해서 ORM을 적극적으로 활용해 프로젝트의 구성하도록 했다. 

처음으로 데이터의 일관성과 관계성을 명확하기 위해서 @OneToMany 와 @ManyToOne 같은 Spring Data JPA 의 어노테이션을 활용해서 데이터 간의 관계를 코드에 녹여냄으로써, 데이터베이스의 외래키를 지정하고 비즈니스 로직을 쉽게 구현할 수 있었다.

연관관계 매핑 사진

하지만 연관관계 매핑을 사용함으로써 의도치 않은 Join 쿼리가 발생하거나 비즈니스 로직에 집중하기 보단 Spring Data JPA에 옵션과 편의를 위해서 자동으로 수행되는 부분에 대해서 주의를 기울여야 하는 문제가 발생했다. 특히 데이터 참조 무결성과 관계성에 집중해 양방향 매핑관계가 도입되니 오히려 관계를 관리 해야 하는 코드가 증가되고 비즈니스 로직 코드의 가독성을 저하시켜 원래의 목적인 코드 가독성 증대와 출동하는 문제가 발생됬다. 이 문제성을 인지해 양방향 관계를 모두 제거하기 시작했고 @ManyToOne 단반향 매핑을 기본적으로 사용하는 방식으로 전면적으로 다시 수정키로 하였다.

단반향 매핑 관계 사진

이렇게 진행 후 지속적으로 비즈니스 로직을 작성하는데 더 많은 객체와 리소스들이 연관된 서비스를 작성할 때 또 예기치 못한 문제가 발생하게 되었다.




### 결과
+ 

## 인터페이스 리소스 및 거래 관리 및 배포 통합 API 개발

### 설계 목적
현 프레임워크를 이용해 인터페이스 운영하기 위해선 세션과 인터페이스를 정의하고 실제로 실행되는 Engine에 리소스를 배포한다. 본 과정은 어댑터와 엔드포인트 세션을 정의하는 Admin Web Application 과 인터페이스의 BPMN과 운영되는 메세지와 거래에 대해서 정의하기 위해 이용되는 Studio Ecplipse IDE Applciation 총 2개의 Application 통해서 수행된다.

![[Pasted image 20240906190434.png]]

상이한 웹과 Eclipse IDE 환경은 사용성 편의성 측면과 이슈 대응에 불편함을 유발했는데, 특히 두 환경에 대한 리소스가 공유되지 못해 Web과 Ecplise를 빈번히 이동하면서 확인할 수 밖에 없고 두 환경에 대한 리소스에 대한 참조 무결성을 보장할 수 없었다. 이 구조로 운영 지원 파트는 사이트에 대한 운영을 위해서 상이한 두 Application을 주기적으로 체크를 할 수 밖에 없고, 때문에 대응 시간이 증가되고 설정에 대한 유효성 체크 기능을 제공되지 않아 온전히 사람의 설정 값에 인터페이스 동작이 결정되었다. 이 결과로 휴먼 에러가 발생될 확률이 높아졌고, 에러가 발생될 경우 세션 또는 인터페이스 정의에 대한 오류 인지 영역을 판단할 수 없어 대응을 위해선 반드시 통합 디버깅이 필수적인 과정이 되었다. 

본 문제점을 해결하기 위해서 Eclipse IDE 에서 제공되는 서비스를 API로 개발해 Web Applicaton 에서 세션과 인터페이스를 정의할 수 있도록 통합된 환경에서 운영 될 수 있도록 했다. 통합된 환경에서 서비스를 제공함으로써 번거로운 애플리케이션 이동을 억제하고 관리되는 리소스에 대해서 유효성 체크를 보장할 수 있었다.

### 문제 정의
+ 

### 해결과정
Eclipse IDE Application 제공하는 서비스를 통합 API 서버에서 제공하기 위해선 정의된 BPMN을 Interface Execute Engine 에서 동작할 수 있도록 하기 위해서 Transaction 기준으로 Interface의 리소스들을 모두 Java 컴파일러를 통해서 클래스파일(.class)로 변환해 Engine으로 전송할 수 있는 서비스를 개발해야만 했다. 

[그림 필요]

해당 서비스는 
### 결과
#### 인터페이스 에디터 API 개발

통합 환경을 제공하게 되면서 운영 환경에 대한 전체 유효성 체크와 흐름도 파악 가능한 API 개발됨

#### 싱글 애플리케이션 구조 멀티 모듈 프로젝트 구조 설계

배포 환경을 위해서 Event-Driven API 가 개발되어 멀티 모듈 프로젝트로 구조가 재설계됨

# Kubernetes 테스트 환경 자동 배포 API 서버 개발
(주)TmaxSoft, Interface Core 파트 - 연구원
2023.12 ~ 진행 중
### 설계 목적
각 사이트별 대응되는 환경이 다르기에 환경 구축에 시간을 소요시간 단축

# 통합 미들웨어 프레임워크 'Super Frame' 내 'AnyLink' 파트 개발
(주)TmaxSoft, Middele Ware 2-3 팀 - 연구원
2021.06 ~ 2021.12

## 인터페이스 리소스 관리 'AnyLink' 웹 페이지 개발
### 설계 목적
실질적인 주체가 Server의 설정값으로 Server Driven UI 탑재

# 인터페이스 프레임워크 'AnyLink 7' 이슈 대응 및 신규 기능 개발
(주)TmaxSoft, Middele Ware 2-3 팀 - 연구원
2021.11 ~ 2023.10

